apply plugin: 'application'
apply plugin: 'java'

repositories {
  mavenCentral()
}

dependencies {
  annotationProcessor 'org.projectlombok:lombok:1.18.26'
  compileOnly 'org.projectlombok:lombok:1.18.26'
  implementation 'com.google.guava:guava:31.1-jre'
  testImplementation 'com.google.jimfs:jimfs:1.1'
  testImplementation 'org.assertj:assertj-core:3.24.2'
  testImplementation 'org.junit.jupiter:junit-jupiter:5.9.1'
}

application {
  mainClass = 'dev.agaber.dsa.ConsoleApp'
}

// Build a "fat jar" (single file containing all dependencies) by default.
// $ gradle clean build -> binary will be in build/libs/http_monitor.jar
jar {
  manifest {
   attributes('Main-Class': 'dev.agaber.dsa.ConsoleApp')
  }
  from {
    configurations.runtimeClasspath.collect {
      it.isDirectory() ? it : zipTree(it)
    }
  }
  duplicatesStrategy = DuplicatesStrategy.EXCLUDE
}

tasks.named('test') {
  useJUnitPlatform()
}